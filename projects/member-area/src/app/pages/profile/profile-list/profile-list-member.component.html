<div class="w-full body-color">
    <div class=" flex justify-content-center flex-wrap">
        <div class="grid w-full md:w-10 container">
            <div class="col mt-5">
                <p-card>
                    <div class="flex mx-5 mt-5">
                        <div class="max-w-max mr-7"> 
                            <img *ngIf="!myProfile" src="{{fileDownload}}{{myProfile}}" alt="" class="w-3rem h-3rem border-circle">
                            <img *ngIf="myProfile" src="../../../../assets/logos/user.jpg" alt="" class="w-3rem h-3rem border-circle">
                            
                            <!-- <img src="{{ fileDownload }}{{ photoId }}" alt="" class="w-10rem h-10rem border-circle"> -->
                        </div>
                        <div class="flex align-items-center flex-wrap">
                            <div>
                                <h1 class="mb-3">{{myFullName}}</h1>
                                <p class="text-black-alpha-60">{{email}}</p>
                                <p class="text-black-alpha-60">{{roleName}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex mx-5 justify-content-end">
                        <div class=" flex align-items-center mt-5 mr-5 cursor-pointer" (click)="changePass()">
                            <div
                                class="border-circle bg-black-alpha-40 icon-box flex align-items-center justify-content-center">
                                <i class="fa-solid fa-code icon text-xl"></i>
                            </div>
                            <h3 class=" ml-3">
                                Change Password
                            </h3>
                        </div>
                        <div class=" flex align-items-center mt-5 cursor-pointer" (click)="editProfile()">
                            <div
                                class="border-circle bg-purple-500 icon-box flex align-items-center justify-content-center">
                                <i class="fa-solid fa-pen icon text-xl"></i>
                            </div>
                            <h3 class=" ml-3">
                                Edit Profile
                            </h3>
                        </div>
                    </div>
                </p-card>
            </div>
        </div>
    </div>
</div>

<div class="w-full body-color">
    <div class=" flex justify-content-center flex-wrap">
        <div class="grid w-full md:w-10 container">
            <div class="col-4">
                <div class=" flex align-items-center mb-4 mt-5">
                    <div
                        class="border-circle bg-black-alpha-40 icon-box flex align-items-center justify-content-center">
                        <i class="fa-solid fa-gear icon text-2xl"></i>
                    </div>
                    <h2 class=" ml-3">
                        Setting
                    </h2>
                </div>
                <p-card>
                    <p-panelMenu [model]="items" [style]="{'width':'100%'}"></p-panelMenu>
                </p-card>
            </div>


            <div class="col-8 mt-3">
                <p-card>
                    <div class="flex mx-5" (click)="postDialog('regular')">
                        <div class="max-w-max">
                            
                            <img *ngIf="!myProfile" src="{{fileDownload}}{{myProfile}}" alt="" class="w-3rem h-3rem border-circle">
                            <img *ngIf="myProfile" src="../../../../assets/logos/user.jpg" alt="" class="w-3rem h-3rem border-circle">


                            <!-- <img src="{{ fileDownload }}{{ photoId }}" alt="" class="w-3rem h-3rem border-circle"> -->
                        </div>
                        <div
                            class="w-full bg-black-alpha-10 ml-5 border-round-3xl flex align-items-center px-4 cursor-pointer">
                            <p class="text-black-alpha-50">What do you think?</p>
                        </div>
                    </div>
                    <div class="flex mx-5">
                        <div routerLink="/homes/new" class=" flex align-items-center mt-5 mr-5 cursor-pointer">
                            <div
                                class="border-circle bg-purple-500 icon-box flex align-items-center justify-content-center" 
                                >
                                <i class="fa-solid fa-check-to-slot icon text-2xl"></i>
                            </div>
                            <h3 class=" ml-3">
                                Poll Post
                            </h3>
                        </div>
                        <div class=" flex align-items-center mt-5 cursor-pointer"
                        (click)="postDialog('premium')">
                            <div
                                class="border-circle bg-orange-400 icon-box flex align-items-center justify-content-center">
                                <i class="fa-regular fa-gem icon text-2xl"></i>
                            </div>
                            <h3 class=" ml-3">
                                Premium Post
                            </h3>
                        </div>
                    </div>
                </p-card>
                <div class="pt-3">
                    <p-card infinite-scroll (scrolled)="onScroll()">
                        <ng-container *ngFor="let p of post;index as i">
                            <div class="md:mx-5">
                                <div class="flex  align-items-center mb-3 mt-7">
                                    <div class="max-w-max mr-3">
                                        <img src="{{ fileDownload }}{{ photoId }}" alt=""
                                            class="w-3rem h-3rem border-circle">
                                    </div>
                                    <div class="w-full">
                                        <h3>{{ myFullName }}</h3>
                                        <p class="text-black-alpha-60">{{ post[i].createdAt | date:"shortTime" }} {{ post[i].createdAt | date:"fullDate" }}</p>
                                    </div>
                                    <div *ngIf="post[i].user.company != null" class="min-w-max mr-3 bg-purple-100 border-round-xl">
                                        <h4 class="mx-3 my-1 text-purple-500">{{ post[i].user.company }}</h4>
                                    </div>
                                    <div class="min-w-max mr-3 bg-green-100 border-round-xl">
                                    <!-- <h4 class="mx-3 my-1 text-green-500">{{ post[i].user.position.positionName }}</h4> -->
                                    </div>
                                    

                                    <div class="relative">
                                        <div class="flex align-items-center text-900 cursor-pointer hover:bg-gray-100" pStyleClass="@next"
                                          enterClass="hidden" leaveToClass="hidden" [hideOnOutsideClick]="true">
                                          <div
                                            class=" cursor-pointer hover:text-black-alpha-60 hover:bg-gray-100 transition-all transition-duration-200 px-3 py-2">
                                            <i class="fa-solid fa-ellipsis text-xl"></i>
                                          </div>
                                        </div>
                                        <div class="absolute right-0 py-1 shadow-2 w-12rem bg-white hidden">
                                          <ul class="list-none p-0 m-0">
                                            <li><a
                                                class="block px-3 pt-2 pb-3 no-underline text-black-alpha-60 hover:bg-gray-100 transition-all transition-duration-200 cursor-pointer"
                                                routerLink="/posts/details/{{post[i].id}}">
                                                show detail
                                              </a></li>
                                          </ul>
                                        </div>
                                      </div>
                                </div>
                                <p-card styleClass="content-box">
                                    <h3 class="text-justify">{{ post[i].title }}
                                    </h3>
                                    <p class="text-black-alpha-60 mt-3 text-justify">
                                        {{ post[i].contents }}
                                    </p>
                                    <div>
                                        <ng-container *ngFor="let ap of post[i].postAttachment;index as j">
                                            <img src="{{ fileDownload }}{{ post[i].postAttachment[j].file.id }}" alt="pos image" class="w-4 pr-3 mt-3">
                                        </ng-container>
                                    </div>
                                </p-card>

<!--     
                                <p-card styleClass="pooling-content">
                                    <h3 class="text-justify">Lorem ipsum, dolor sit amet consectetur adipisicing
                                        elit</h3>
                                    <div class="mt-3 py-3 body-color">
                                        <div class="flex align-items-center">
                                            <p class="text-center text-lg main-text w-full">Option 1</p>
                                            <p class="min-w-max mr-3">5 votes</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 py-3 body-color">
                                        <div class="flex align-items-center">
                                            <p class="text-center text-lg main-text w-full">Option 2</p>
                                            <p class="min-w-max mr-3">5 votes</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 py-3 body-color">
                                        <div class="flex align-items-center">
                                            <p class="text-center text-lg main-text w-full">Option 3</p>
                                            <p class="min-w-max mr-3">5 votes</p>
                                        </div>
                                    </div>
    
                                    <div class="flex mt-5 align-items-center text-black-alpha-60">
                                        <i class="fa-solid fa-check-to-slot text-2xl mr-2 cursor-pointer"></i>
                                        <p class="w-full">15 votes</p>
    
                                        <p class="min-w-max">Until 2 day</p>
    
                                    </div>
                                </p-card> -->
    
                                <div class="flex mt-5 align-items-center text-black-alpha-60">
                                    <i class="fa-regular fa-heart text-2xl mr-2 cursor-pointer" 
                                    (click)="actLikePost(post[i].id,post[i].likeId,i)"></i>
                                    <p class="min-w-max">{{ post[i].countOfLike }} likes</p>
    
                                    <i class="fa-regular fa-message text-2xl ml-5 mr-2 cursor-pointer"></i>
                                    <p class="w-full">15 comments</p>
    
                                    <i class="fa-regular fa-bookmark text-2xl mr-2 cursor-pointer"></i>
                                </div>
                            </div>
                        </ng-container>
                    </p-card>
                </div>
            </div>
        </div>
    </div>
</div>


<p-dialog [(visible)]="display" [breakpoints]="{'960px': '75vw', '640px': '100vw'}">
    <ng-template pTemplate="header">
      <ng-container *ngIf="postType == 'premium'">
        <div class="border-circle bg-orange-300 icon-box flex align-items-center justify-content-center">
          <i class="fa-regular fa-gem icon text-xl"></i>
        </div>
      </ng-container>
      <ng-container *ngIf="postType == 'regular'">
        <div class="border-circle main-color icon-box flex align-items-center justify-content-center">
          <i class="fa-regular fa-note-sticky icon text-xl"></i>
        </div>
      </ng-container>
      <h3 class="capitalize">{{postType}} Post</h3>
    </ng-template>
    <div class="grid bg-white border-round-xl w-30rem">
      <div class="col-12">
        <div class="flex mb-3">
          <div class="max-w-max mr-3">
            <!-- <img src="{{urlFile}}{{myProfile}}" alt="" class="w-3rem h-3rem border-circle"> -->
          </div>
          <div class="w-full">
            <h3>{{ myFullName }}</h3>
            <p class="text-black-alpha-60">Java Developer</p>
          </div>
        </div>
        <form class="card" [formGroup]="postForm">
          <div class="field">
            <input pInputText id="title" name="title" type="text" class="w-full p-inputtext-sm" formControlName="title"
              placeholder="title" required>
          </div>
          <div class="field">
            <textarea [rows]="5" [cols]="30" pInputTextarea [autoResize]="true" name="contents" type="text"
              formControlName="contents" class="w-full h-auto text-sm" placeholder="contents"></textarea>
          </div>
          <div class="field">
            <label for="file">Photo</label>
            <p-fileUpload id="file" name="file" accept="image/*" [customUpload]="true"
              (uploadHandler)="fileUpload($event)" [multiple]="true">
            </p-fileUpload>
          </div>
          <button pButton [disabled]="postForm.invalid" type="submit" (click)="postInsert()"
            class="main-color w-full mt-3" label="SUBMIT"></button>
        </form>
      </div>
    </div>
  </p-dialog>
  